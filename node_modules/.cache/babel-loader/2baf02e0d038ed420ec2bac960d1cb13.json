{"remainingRequest":"/Users/imranrasheed/Desktop/new-splitur/frontend/node_modules/babel-loader/lib/index.js!/Users/imranrasheed/Desktop/new-splitur/frontend/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/imranrasheed/Desktop/new-splitur/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/imranrasheed/Desktop/new-splitur/frontend/src/views/apps/chat/Chat.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/imranrasheed/Desktop/new-splitur/frontend/src/views/apps/chat/Chat.vue","mtime":1658909892000},{"path":"/Users/imranrasheed/Desktop/new-splitur/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1658911406000},{"path":"/Users/imranrasheed/Desktop/new-splitur/frontend/node_modules/babel-loader/lib/index.js","mtime":1658911406000},{"path":"/Users/imranrasheed/Desktop/new-splitur/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1658911406000},{"path":"/Users/imranrasheed/Desktop/new-splitur/frontend/node_modules/vue-loader/lib/index.js","mtime":1658911432000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL1VzZXJzL2ltcmFucmFzaGVlZC9EZXNrdG9wL25ldy1zcGxpdHVyL2Zyb250ZW5kL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBzdG9yZSBmcm9tICdAL3N0b3JlJzsKaW1wb3J0IHsgcmVmLCBvblVubW91bnRlZCwgbmV4dFRpY2sgfSBmcm9tICdAdnVlL2NvbXBvc2l0aW9uLWFwaSc7CmltcG9ydCB7IEJBdmF0YXIsIEJEcm9wZG93biwgQkRyb3Bkb3duSXRlbSwgQkZvcm0sIEJJbnB1dEdyb3VwLCBCRm9ybUlucHV0LCBCQnV0dG9uIH0gZnJvbSAnYm9vdHN0cmFwLXZ1ZSc7CmltcG9ydCBWdWVQZXJmZWN0U2Nyb2xsYmFyIGZyb20gJ3Z1ZS1wZXJmZWN0LXNjcm9sbGJhcic7IC8vIGltcG9ydCB7IGZvcm1hdERhdGUgfSBmcm9tICdAY29yZS91dGlscy9maWx0ZXInCgppbXBvcnQgeyAkdGhlbWVCcmVha3BvaW50cyB9IGZyb20gJ0B0aGVtZUNvbmZpZyc7CmltcG9ydCB7IHVzZVJlc3BvbnNpdmVBcHBMZWZ0U2lkZWJhclZpc2liaWxpdHkgfSBmcm9tICdAY29yZS9jb21wLWZ1bmN0aW9ucy91aS9hcHAnOwppbXBvcnQgQ2hhdExlZnRTaWRlYmFyIGZyb20gJy4vQ2hhdExlZnRTaWRlYmFyLnZ1ZSc7CmltcG9ydCBjaGF0U3RvcmVNb2R1bGUgZnJvbSAnLi9jaGF0U3RvcmVNb2R1bGUnOwppbXBvcnQgQ2hhdEFjdGl2ZUNoYXRDb250ZW50RGV0YWlsc1NpZGVkYmFyIGZyb20gJy4vQ2hhdEFjdGl2ZUNoYXRDb250ZW50RGV0YWlsc1NpZGVkYmFyLnZ1ZSc7CmltcG9ydCBDaGF0TG9nIGZyb20gJy4vQ2hhdExvZy52dWUnOwppbXBvcnQgdXNlQ2hhdCBmcm9tICcuL3VzZUNoYXQnOwpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogewogICAgLy8gQlNWCiAgICBCQXZhdGFyOiBCQXZhdGFyLAogICAgQkRyb3Bkb3duOiBCRHJvcGRvd24sCiAgICBCRHJvcGRvd25JdGVtOiBCRHJvcGRvd25JdGVtLAogICAgQkZvcm06IEJGb3JtLAogICAgQklucHV0R3JvdXA6IEJJbnB1dEdyb3VwLAogICAgQkZvcm1JbnB1dDogQkZvcm1JbnB1dCwKICAgIEJCdXR0b246IEJCdXR0b24sCiAgICAvLyAzcmQgUGFydHkKICAgIFZ1ZVBlcmZlY3RTY3JvbGxiYXI6IFZ1ZVBlcmZlY3RTY3JvbGxiYXIsCiAgICAvLyBTRkMKICAgIENoYXRMZWZ0U2lkZWJhcjogQ2hhdExlZnRTaWRlYmFyLAogICAgQ2hhdEFjdGl2ZUNoYXRDb250ZW50RGV0YWlsc1NpZGVkYmFyOiBDaGF0QWN0aXZlQ2hhdENvbnRlbnREZXRhaWxzU2lkZWRiYXIsCiAgICBDaGF0TG9nOiBDaGF0TG9nCiAgfSwKICBzZXR1cDogZnVuY3Rpb24gc2V0dXAoKSB7CiAgICB2YXIgQ0hBVF9BUFBfU1RPUkVfTU9EVUxFX05BTUUgPSAnYXBwLWNoYXQnOyAvLyBSZWdpc3RlciBtb2R1bGUKCiAgICBpZiAoIXN0b3JlLmhhc01vZHVsZShDSEFUX0FQUF9TVE9SRV9NT0RVTEVfTkFNRSkpIHN0b3JlLnJlZ2lzdGVyTW9kdWxlKENIQVRfQVBQX1NUT1JFX01PRFVMRV9OQU1FLCBjaGF0U3RvcmVNb2R1bGUpOyAvLyBVblJlZ2lzdGVyIG9uIGxlYXZlCgogICAgb25Vbm1vdW50ZWQoZnVuY3Rpb24gKCkgewogICAgICBpZiAoc3RvcmUuaGFzTW9kdWxlKENIQVRfQVBQX1NUT1JFX01PRFVMRV9OQU1FKSkgc3RvcmUudW5yZWdpc3Rlck1vZHVsZShDSEFUX0FQUF9TVE9SRV9NT0RVTEVfTkFNRSk7CiAgICB9KTsKCiAgICB2YXIgX3VzZUNoYXQgPSB1c2VDaGF0KCksCiAgICAgICAgcmVzb2x2ZUF2YXRhckJhZGdlVmFyaWFudCA9IF91c2VDaGF0LnJlc29sdmVBdmF0YXJCYWRnZVZhcmlhbnQ7IC8vIFNjcm9sbCB0byBCb3R0b20gQ2hhdExvZwoKCiAgICB2YXIgcmVmQ2hhdExvZ1BTID0gcmVmKG51bGwpOwoKICAgIHZhciBzY3JvbGxUb0JvdHRvbUluQ2hhdExvZyA9IGZ1bmN0aW9uIHNjcm9sbFRvQm90dG9tSW5DaGF0TG9nKCkgewogICAgICB2YXIgc2Nyb2xsRWwgPSByZWZDaGF0TG9nUFMudmFsdWUuJGVsIHx8IHJlZkNoYXRMb2dQUy52YWx1ZTsKICAgICAgc2Nyb2xsRWwuc2Nyb2xsVG9wID0gc2Nyb2xsRWwuc2Nyb2xsSGVpZ2h0OwogICAgfTsgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAvLyBDaGF0cyAmIENvbnRhY3RzCiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCgogICAgdmFyIGNoYXRzQ29udGFjdHMgPSByZWYoW10pOwogICAgdmFyIGNvbnRhY3RzID0gcmVmKFtdKTsKCiAgICB2YXIgZmV0Y2hDaGF0QW5kQ29udGFjdHMgPSBmdW5jdGlvbiBmZXRjaENoYXRBbmRDb250YWN0cygpIHsKICAgICAgc3RvcmUuZGlzcGF0Y2goJ2FwcC1jaGF0L2ZldGNoQ2hhdHNBbmRDb250YWN0cycpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgY2hhdHNDb250YWN0cy52YWx1ZSA9IHJlc3BvbnNlLmRhdGEuY2hhdHNDb250YWN0czsKICAgICAgICBjb250YWN0cy52YWx1ZSA9IHJlc3BvbnNlLmRhdGEuY29udGFjdHM7IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11c2UtYmVmb3JlLWRlZmluZQoKICAgICAgICBwcm9maWxlVXNlckRhdGFNaW5pbWFsLnZhbHVlID0gcmVzcG9uc2UuZGF0YS5wcm9maWxlVXNlcjsKICAgICAgfSk7CiAgICB9OwoKICAgIGZldGNoQ2hhdEFuZENvbnRhY3RzKCk7IC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgLy8gU2luZ2xlIENoYXQKICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgIHZhciBhY3RpdmVDaGF0ID0gcmVmKHt9KTsKICAgIHZhciBjaGF0SW5wdXRNZXNzYWdlID0gcmVmKCcnKTsKCiAgICB2YXIgb3BlbkNoYXRPZkNvbnRhY3QgPSBmdW5jdGlvbiBvcGVuQ2hhdE9mQ29udGFjdCh1c2VySWQpIHsKICAgICAgLy8gUmVzZXQgc2VuZCBtZXNzYWdlIGlucHV0IHZhbHVlCiAgICAgIGNoYXRJbnB1dE1lc3NhZ2UudmFsdWUgPSAnJzsKICAgICAgc3RvcmUuZGlzcGF0Y2goJ2FwcC1jaGF0L2dldENoYXQnLCB7CiAgICAgICAgdXNlcklkOiB1c2VySWQKICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBhY3RpdmVDaGF0LnZhbHVlID0gcmVzcG9uc2UuZGF0YTsgLy8gU2V0IHVuc2Vlbk1zZ3MgdG8gMAoKICAgICAgICB2YXIgY29udGFjdCA9IGNoYXRzQ29udGFjdHMudmFsdWUuZmluZChmdW5jdGlvbiAoYykgewogICAgICAgICAgcmV0dXJuIGMuaWQgPT09IHVzZXJJZDsKICAgICAgICB9KTsKICAgICAgICBpZiAoY29udGFjdCkgY29udGFjdC5jaGF0LnVuc2Vlbk1zZ3MgPSAwOyAvLyBTY3JvbGwgdG8gYm90dG9tCgogICAgICAgIG5leHRUaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHNjcm9sbFRvQm90dG9tSW5DaGF0TG9nKCk7CiAgICAgICAgfSk7CiAgICAgIH0pOyAvLyBpZiBTTSBkZXZpY2UgPT4gIENsb3NlIENoYXQgJiBDb250YWN0cyBsZWZ0IHNpZGViYXIKICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVzZS1iZWZvcmUtZGVmaW5lCgogICAgICBtcVNoYWxsU2hvd0xlZnRTaWRlYmFyLnZhbHVlID0gZmFsc2U7CiAgICB9OwoKICAgIHZhciBzZW5kTWVzc2FnZSA9IGZ1bmN0aW9uIHNlbmRNZXNzYWdlKCkgewogICAgICBpZiAoIWNoYXRJbnB1dE1lc3NhZ2UudmFsdWUpIHJldHVybjsKICAgICAgdmFyIHBheWxvYWQgPSB7CiAgICAgICAgY29udGFjdElkOiBhY3RpdmVDaGF0LnZhbHVlLmNvbnRhY3QuaWQsCiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVzZS1iZWZvcmUtZGVmaW5lCiAgICAgICAgc2VuZGVySWQ6IHByb2ZpbGVVc2VyRGF0YU1pbmltYWwudmFsdWUuaWQsCiAgICAgICAgbWVzc2FnZTogY2hhdElucHV0TWVzc2FnZS52YWx1ZQogICAgICB9OwogICAgICBzdG9yZS5kaXNwYXRjaCgnYXBwLWNoYXQvc2VuZE1lc3NhZ2UnLCBwYXlsb2FkKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIHZhciBfcmVzcG9uc2UkZGF0YSA9IHJlc3BvbnNlLmRhdGEsCiAgICAgICAgICAgIG5ld01lc3NhZ2VEYXRhID0gX3Jlc3BvbnNlJGRhdGEubmV3TWVzc2FnZURhdGEsCiAgICAgICAgICAgIGNoYXQgPSBfcmVzcG9uc2UkZGF0YS5jaGF0OyAvLyA/IElmIGl0J3Mgbm90IHVuZGVmaW5lZCA9PiBOZXcgY2hhdCBpcyBjcmVhdGVkIChDb250YWN0IGlzIG5vdCBpbiBsaXN0IG9mIGNoYXRzKQoKICAgICAgICBpZiAoY2hhdCAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICBhY3RpdmVDaGF0LnZhbHVlID0gewogICAgICAgICAgICBjaGF0OiBjaGF0LAogICAgICAgICAgICBjb250YWN0OiBhY3RpdmVDaGF0LnZhbHVlLmNvbnRhY3QKICAgICAgICAgIH07CiAgICAgICAgICBjaGF0c0NvbnRhY3RzLnZhbHVlLnB1c2goX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBhY3RpdmVDaGF0LnZhbHVlLmNvbnRhY3QpLCB7fSwgewogICAgICAgICAgICBjaGF0OiB7CiAgICAgICAgICAgICAgaWQ6IGNoYXQuaWQsCiAgICAgICAgICAgICAgbGFzdE1lc3NhZ2U6IG5ld01lc3NhZ2VEYXRhLAogICAgICAgICAgICAgIHVuc2Vlbk1zZ3M6IDAKICAgICAgICAgICAgfQogICAgICAgICAgfSkpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAvLyBBZGQgbWVzc2FnZSB0byBsb2cKICAgICAgICAgIGFjdGl2ZUNoYXQudmFsdWUuY2hhdC5jaGF0LnB1c2gobmV3TWVzc2FnZURhdGEpOwogICAgICAgIH0gLy8gUmVzZXQgc2VuZCBtZXNzYWdlIGlucHV0IHZhbHVlCgoKICAgICAgICBjaGF0SW5wdXRNZXNzYWdlLnZhbHVlID0gJyc7IC8vIFNldCBMYXN0IE1lc3NhZ2UgZm9yIGFjdGl2ZSBjb250YWN0CgogICAgICAgIHZhciBjb250YWN0ID0gY2hhdHNDb250YWN0cy52YWx1ZS5maW5kKGZ1bmN0aW9uIChjKSB7CiAgICAgICAgICByZXR1cm4gYy5pZCA9PT0gYWN0aXZlQ2hhdC52YWx1ZS5jb250YWN0LmlkOwogICAgICAgIH0pOwogICAgICAgIGNvbnRhY3QuY2hhdC5sYXN0TWVzc2FnZSA9IG5ld01lc3NhZ2VEYXRhOyAvLyBTY3JvbGwgdG8gYm90dG9tCgogICAgICAgIG5leHRUaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHNjcm9sbFRvQm90dG9tSW5DaGF0TG9nKCk7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfTsKCiAgICB2YXIgcGVyZmVjdFNjcm9sbGJhclNldHRpbmdzID0gewogICAgICBtYXhTY3JvbGxiYXJMZW5ndGg6IDE1MAogICAgfTsgLy8gVXNlciBQcm9maWxlIFNpZGViYXIKICAgIC8vID8gV2lsbCBjb250YWluIGFsbCBkZXRhaWxzIG9mIHByb2ZpbGUgdXNlciAoZS5nLiBzZXR0aW5ncywgYWJvdXQgZXRjLikKCiAgICB2YXIgcHJvZmlsZVVzZXJEYXRhID0gcmVmKHt9KTsgLy8gPyBXaWxsIGNvbnRhaW4gaWQsIG5hbWUgYW5kIGF2YXRhciAmIHN0YXR1cwoKICAgIHZhciBwcm9maWxlVXNlckRhdGFNaW5pbWFsID0gcmVmKHt9KTsKICAgIHZhciBzaGFsbFNob3dVc2VyUHJvZmlsZVNpZGViYXIgPSByZWYoZmFsc2UpOwoKICAgIHZhciBzaG93VXNlclByb2ZpbGVTaWRlYmFyID0gZnVuY3Rpb24gc2hvd1VzZXJQcm9maWxlU2lkZWJhcigpIHsKICAgICAgc3RvcmUuZGlzcGF0Y2goJ2FwcC1jaGF0L2dldFByb2ZpbGVVc2VyJykudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBwcm9maWxlVXNlckRhdGEudmFsdWUgPSByZXNwb25zZS5kYXRhOwogICAgICAgIHNoYWxsU2hvd1VzZXJQcm9maWxlU2lkZWJhci52YWx1ZSA9IHRydWU7CiAgICAgIH0pOwogICAgfTsgLy8gQWN0aXZlIENoYXQgQ29udGFjdCBEZXRhaWxzCgoKICAgIHZhciBzaGFsbFNob3dBY3RpdmVDaGF0Q29udGFjdFNpZGViYXIgPSByZWYoZmFsc2UpOyAvLyBVSSArIFNNIERldmljZXMKICAgIC8vIExlZnQgU2lkZWJhciBSZXNwb25zaXZlbmVzcwoKICAgIHZhciBfdXNlUmVzcG9uc2l2ZUFwcExlZnQgPSB1c2VSZXNwb25zaXZlQXBwTGVmdFNpZGViYXJWaXNpYmlsaXR5KCksCiAgICAgICAgbXFTaGFsbFNob3dMZWZ0U2lkZWJhciA9IF91c2VSZXNwb25zaXZlQXBwTGVmdC5tcVNoYWxsU2hvd0xlZnRTaWRlYmFyOwoKICAgIHZhciBzdGFydENvbnZlcnNhdGlvbiA9IGZ1bmN0aW9uIHN0YXJ0Q29udmVyc2F0aW9uKCkgewogICAgICBpZiAoc3RvcmUuc3RhdGUuYXBwLndpbmRvd1dpZHRoIDwgJHRoZW1lQnJlYWtwb2ludHMubGcpIHsKICAgICAgICBtcVNoYWxsU2hvd0xlZnRTaWRlYmFyLnZhbHVlID0gdHJ1ZTsKICAgICAgfQogICAgfTsKCiAgICByZXR1cm4gewogICAgICAvLyBGaWx0ZXJzCiAgICAgIC8vIGZvcm1hdERhdGUsCiAgICAgIC8vIHVzZUNoYXQKICAgICAgcmVzb2x2ZUF2YXRhckJhZGdlVmFyaWFudDogcmVzb2x2ZUF2YXRhckJhZGdlVmFyaWFudCwKICAgICAgLy8gQ2hhdCAmIENvbnRhY3RzCiAgICAgIGNoYXRzQ29udGFjdHM6IGNoYXRzQ29udGFjdHMsCiAgICAgIGNvbnRhY3RzOiBjb250YWN0cywKICAgICAgLy8gU2luZ2xlIENoYXQKICAgICAgcmVmQ2hhdExvZ1BTOiByZWZDaGF0TG9nUFMsCiAgICAgIGFjdGl2ZUNoYXQ6IGFjdGl2ZUNoYXQsCiAgICAgIGNoYXRJbnB1dE1lc3NhZ2U6IGNoYXRJbnB1dE1lc3NhZ2UsCiAgICAgIG9wZW5DaGF0T2ZDb250YWN0OiBvcGVuQ2hhdE9mQ29udGFjdCwKICAgICAgc2VuZE1lc3NhZ2U6IHNlbmRNZXNzYWdlLAogICAgICAvLyBQcm9maWxlIFVzZXIgTWluaW1hbCBEYXRhCiAgICAgIHByb2ZpbGVVc2VyRGF0YU1pbmltYWw6IHByb2ZpbGVVc2VyRGF0YU1pbmltYWwsCiAgICAgIC8vIFVzZXIgUHJvZmlsZSBTaWRlYmFyCiAgICAgIHByb2ZpbGVVc2VyRGF0YTogcHJvZmlsZVVzZXJEYXRhLAogICAgICBzaGFsbFNob3dVc2VyUHJvZmlsZVNpZGViYXI6IHNoYWxsU2hvd1VzZXJQcm9maWxlU2lkZWJhciwKICAgICAgc2hvd1VzZXJQcm9maWxlU2lkZWJhcjogc2hvd1VzZXJQcm9maWxlU2lkZWJhciwKICAgICAgLy8gQWN0aXZlIENoYXQgQ29udGFjdCBEZXRhaWxzCiAgICAgIHNoYWxsU2hvd0FjdGl2ZUNoYXRDb250YWN0U2lkZWJhcjogc2hhbGxTaG93QWN0aXZlQ2hhdENvbnRhY3RTaWRlYmFyLAogICAgICAvLyBVSQogICAgICBwZXJmZWN0U2Nyb2xsYmFyU2V0dGluZ3M6IHBlcmZlY3RTY3JvbGxiYXJTZXR0aW5ncywKICAgICAgLy8gVUkgKyBTTSBEZXZpY2VzCiAgICAgIHN0YXJ0Q29udmVyc2F0aW9uOiBzdGFydENvbnZlcnNhdGlvbiwKICAgICAgbXFTaGFsbFNob3dMZWZ0U2lkZWJhcjogbXFTaGFsbFNob3dMZWZ0U2lkZWJhcgogICAgfTsKICB9Cn07"},{"version":3,"sources":["Chat.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <!-- Need to add height inherit because Vue 2 don't support multiple root ele -->\n  <div style=\"height: inherit\">\n    <div\n      class=\"body-content-overlay\"\n      :class=\"{'show': shallShowUserProfileSidebar || shallShowActiveChatContactSidebar || mqShallShowLeftSidebar}\"\n      @click=\"mqShallShowLeftSidebar=shallShowActiveChatContactSidebar=shallShowUserProfileSidebar=false\"\n    />\n\n    <!-- Main Area -->\n    <section class=\"chat-app-window\">\n\n      <!-- Start Chat Logo -->\n      <div\n        v-if=\"!activeChat.contact\"\n        class=\"start-chat-area\"\n      >\n        <div class=\"mb-1 start-chat-icon\">\n          <feather-icon\n            icon=\"MessageSquareIcon\"\n            size=\"56\"\n          />\n        </div>\n        <h4\n          class=\"sidebar-toggle start-chat-text\"\n          @click=\"startConversation\"\n        >\n          Start Conversation\n        </h4>\n      </div>\n\n      <!-- Chat Content -->\n      <div\n        v-else\n        class=\"active-chat\"\n      >\n        <!-- Chat Navbar -->\n        <div class=\"chat-navbar\">\n          <header class=\"chat-header\">\n\n            <!-- Avatar & Name -->\n            <div class=\"d-flex align-items-center\">\n\n              <!-- Toggle Icon -->\n              <div class=\"sidebar-toggle d-block d-lg-none mr-1\">\n                <feather-icon\n                  icon=\"MenuIcon\"\n                  class=\"cursor-pointer\"\n                  size=\"21\"\n                  @click=\"mqShallShowLeftSidebar = true\"\n                />\n              </div>\n\n              <b-avatar\n                size=\"36\"\n                :src=\"activeChat.contact.avatar\"\n                class=\"mr-1 cursor-pointer badge-minimal\"\n                badge\n                :badge-variant=\"resolveAvatarBadgeVariant(activeChat.contact.status)\"\n                @click.native=\"shallShowActiveChatContactSidebar=true\"\n              />\n              <h6 class=\"mb-0\">\n                {{ activeChat.contact.fullName }}\n              </h6>\n            </div>\n\n            <!-- Contact Actions -->\n            <div class=\"d-flex align-items-center\">\n              <feather-icon\n                icon=\"PhoneCallIcon\"\n                size=\"17\"\n                class=\"cursor-pointer d-sm-block d-none mr-1\"\n              />\n              <feather-icon\n                icon=\"VideoIcon\"\n                size=\"17\"\n                class=\"cursor-pointer d-sm-block d-none mr-1\"\n              />\n              <feather-icon\n                icon=\"SearchIcon\"\n                size=\"17\"\n                class=\"cursor-pointer d-sm-block d-none mr-50\"\n              />\n              <div class=\"dropdown\">\n                <b-dropdown\n                  variant=\"link\"\n                  no-caret\n                  toggle-class=\"p-0\"\n                  right\n                >\n                  <template #button-content>\n                    <feather-icon\n                      icon=\"MoreVerticalIcon\"\n                      size=\"17\"\n                      class=\"align-middle text-body\"\n                    />\n                  </template>\n                  <b-dropdown-item>\n                    View Contact\n                  </b-dropdown-item>\n                  <b-dropdown-item>\n                    Mute Notifications\n                  </b-dropdown-item>\n                  <b-dropdown-item>\n                    Block Contact\n                  </b-dropdown-item>\n                  <b-dropdown-item>\n                    Clear Chat\n                  </b-dropdown-item>\n                  <b-dropdown-item>\n                    Report\n                  </b-dropdown-item>\n                </b-dropdown>\n              </div>\n            </div>\n          </header>\n        </div>\n\n        <!-- User Chat Area -->\n        <vue-perfect-scrollbar\n          ref=\"refChatLogPS\"\n          :settings=\"perfectScrollbarSettings\"\n          class=\"user-chats scroll-area\"\n        >\n          <chat-log\n            :chat-data=\"activeChat\"\n            :profile-user-avatar=\"profileUserDataMinimal.avatar\"\n          />\n        </vue-perfect-scrollbar>\n\n        <!-- Message Input -->\n        <b-form\n          class=\"chat-app-form\"\n          @submit.prevent=\"sendMessage\"\n        >\n          <b-input-group class=\"input-group-merge form-send-message mr-1\">\n            <b-form-input\n              v-model=\"chatInputMessage\"\n              placeholder=\"Enter your message\"\n            />\n          </b-input-group>\n          <b-button\n            variant=\"primary\"\n            type=\"submit\"\n          >\n            Send\n          </b-button>\n        </b-form>\n      </div>\n    </section>\n\n    <!-- Active Chat Contact Details Sidebar -->\n    <chat-active-chat-content-details-sidedbar\n      :shall-show-active-chat-contact-sidebar.sync=\"shallShowActiveChatContactSidebar\"\n      :contact=\"activeChat.contact || {}\"\n    />\n\n    <!-- Sidebar -->\n    <portal to=\"content-renderer-sidebar-left\">\n      <chat-left-sidebar\n        :chats-contacts=\"chatsContacts\"\n        :contacts=\"contacts\"\n        :active-chat-contact-id=\"activeChat.contact ? activeChat.contact.id : null\"\n        :shall-show-user-profile-sidebar.sync=\"shallShowUserProfileSidebar\"\n        :profile-user-data=\"profileUserData\"\n        :profile-user-minimal-data=\"profileUserDataMinimal\"\n        :mq-shall-show-left-sidebar.sync=\"mqShallShowLeftSidebar\"\n        @show-user-profile=\"showUserProfileSidebar\"\n        @open-chat=\"openChatOfContact\"\n      />\n    </portal>\n  </div>\n</template>\n\n<script>\nimport store from '@/store'\nimport {\n  ref, onUnmounted, nextTick,\n} from '@vue/composition-api'\nimport {\n  BAvatar, BDropdown, BDropdownItem, BForm, BInputGroup, BFormInput, BButton,\n} from 'bootstrap-vue'\nimport VuePerfectScrollbar from 'vue-perfect-scrollbar'\n// import { formatDate } from '@core/utils/filter'\nimport { $themeBreakpoints } from '@themeConfig'\nimport { useResponsiveAppLeftSidebarVisibility } from '@core/comp-functions/ui/app'\nimport ChatLeftSidebar from './ChatLeftSidebar.vue'\nimport chatStoreModule from './chatStoreModule'\nimport ChatActiveChatContentDetailsSidedbar from './ChatActiveChatContentDetailsSidedbar.vue'\nimport ChatLog from './ChatLog.vue'\nimport useChat from './useChat'\n\nexport default {\n  components: {\n\n    // BSV\n    BAvatar,\n    BDropdown,\n    BDropdownItem,\n    BForm,\n    BInputGroup,\n    BFormInput,\n    BButton,\n\n    // 3rd Party\n    VuePerfectScrollbar,\n\n    // SFC\n    ChatLeftSidebar,\n    ChatActiveChatContentDetailsSidedbar,\n    ChatLog,\n  },\n  setup() {\n    const CHAT_APP_STORE_MODULE_NAME = 'app-chat'\n\n    // Register module\n    if (!store.hasModule(CHAT_APP_STORE_MODULE_NAME)) store.registerModule(CHAT_APP_STORE_MODULE_NAME, chatStoreModule)\n\n    // UnRegister on leave\n    onUnmounted(() => {\n      if (store.hasModule(CHAT_APP_STORE_MODULE_NAME)) store.unregisterModule(CHAT_APP_STORE_MODULE_NAME)\n    })\n\n    const { resolveAvatarBadgeVariant } = useChat()\n\n    // Scroll to Bottom ChatLog\n    const refChatLogPS = ref(null)\n    const scrollToBottomInChatLog = () => {\n      const scrollEl = refChatLogPS.value.$el || refChatLogPS.value\n      scrollEl.scrollTop = scrollEl.scrollHeight\n    }\n\n    // ------------------------------------------------\n    // Chats & Contacts\n    // ------------------------------------------------\n    const chatsContacts = ref([])\n    const contacts = ref([])\n\n    const fetchChatAndContacts = () => {\n      store.dispatch('app-chat/fetchChatsAndContacts')\n        .then(response => {\n          chatsContacts.value = response.data.chatsContacts\n          contacts.value = response.data.contacts\n          // eslint-disable-next-line no-use-before-define\n          profileUserDataMinimal.value = response.data.profileUser\n        })\n    }\n\n    fetchChatAndContacts()\n\n    // ------------------------------------------------\n    // Single Chat\n    // ------------------------------------------------\n    const activeChat = ref({})\n    const chatInputMessage = ref('')\n    const openChatOfContact = userId => {\n      // Reset send message input value\n      chatInputMessage.value = ''\n\n      store.dispatch('app-chat/getChat', { userId })\n        .then(response => {\n          activeChat.value = response.data\n\n          // Set unseenMsgs to 0\n          const contact = chatsContacts.value.find(c => c.id === userId)\n          if (contact) contact.chat.unseenMsgs = 0\n\n          // Scroll to bottom\n          nextTick(() => { scrollToBottomInChatLog() })\n        })\n\n      // if SM device =>  Close Chat & Contacts left sidebar\n      // eslint-disable-next-line no-use-before-define\n      mqShallShowLeftSidebar.value = false\n    }\n    const sendMessage = () => {\n      if (!chatInputMessage.value) return\n      const payload = {\n        contactId: activeChat.value.contact.id,\n        // eslint-disable-next-line no-use-before-define\n        senderId: profileUserDataMinimal.value.id,\n        message: chatInputMessage.value,\n      }\n      store.dispatch('app-chat/sendMessage', payload)\n        .then(response => {\n          const { newMessageData, chat } = response.data\n\n          // ? If it's not undefined => New chat is created (Contact is not in list of chats)\n          if (chat !== undefined) {\n            activeChat.value = { chat, contact: activeChat.value.contact }\n            chatsContacts.value.push({\n              ...activeChat.value.contact,\n              chat: {\n                id: chat.id,\n                lastMessage: newMessageData,\n                unseenMsgs: 0,\n              },\n            })\n          } else {\n            // Add message to log\n            activeChat.value.chat.chat.push(newMessageData)\n          }\n\n          // Reset send message input value\n          chatInputMessage.value = ''\n\n          // Set Last Message for active contact\n          const contact = chatsContacts.value.find(c => c.id === activeChat.value.contact.id)\n          contact.chat.lastMessage = newMessageData\n\n          // Scroll to bottom\n          nextTick(() => { scrollToBottomInChatLog() })\n        })\n    }\n\n    const perfectScrollbarSettings = {\n      maxScrollbarLength: 150,\n    }\n\n    // User Profile Sidebar\n    // ? Will contain all details of profile user (e.g. settings, about etc.)\n    const profileUserData = ref({})\n    // ? Will contain id, name and avatar & status\n    const profileUserDataMinimal = ref({})\n\n    const shallShowUserProfileSidebar = ref(false)\n    const showUserProfileSidebar = () => {\n      store.dispatch('app-chat/getProfileUser')\n        .then(response => {\n          profileUserData.value = response.data\n          shallShowUserProfileSidebar.value = true\n        })\n    }\n\n    // Active Chat Contact Details\n    const shallShowActiveChatContactSidebar = ref(false)\n\n    // UI + SM Devices\n    // Left Sidebar Responsiveness\n    const { mqShallShowLeftSidebar } = useResponsiveAppLeftSidebarVisibility()\n    const startConversation = () => {\n      if (store.state.app.windowWidth < $themeBreakpoints.lg) {\n        mqShallShowLeftSidebar.value = true\n      }\n    }\n\n    return {\n      // Filters\n      // formatDate,\n\n      // useChat\n      resolveAvatarBadgeVariant,\n\n      // Chat & Contacts\n      chatsContacts,\n      contacts,\n\n      // Single Chat\n      refChatLogPS,\n      activeChat,\n      chatInputMessage,\n      openChatOfContact,\n      sendMessage,\n\n      // Profile User Minimal Data\n      profileUserDataMinimal,\n\n      // User Profile Sidebar\n      profileUserData,\n      shallShowUserProfileSidebar,\n      showUserProfileSidebar,\n\n      // Active Chat Contact Details\n      shallShowActiveChatContactSidebar,\n\n      // UI\n      perfectScrollbarSettings,\n\n      // UI + SM Devices\n      startConversation,\n      mqShallShowLeftSidebar,\n    }\n  },\n}\n</script>\n\n<style lang=\"scss\" scoped>\n\n</style>\n\n<style lang=\"scss\">\n@import \"~@core/scss/base/pages/app-chat.scss\";\n@import \"~@core/scss/base/pages/app-chat-list.scss\";\n</style>\n"],"sourceRoot":"src/views/apps/chat"}]}