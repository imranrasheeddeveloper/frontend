{"remainingRequest":"C:\\xampp\\htdocs\\GulflamarERPSystem\\frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\xampp\\htdocs\\GulflamarERPSystem\\frontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\xampp\\htdocs\\GulflamarERPSystem\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\xampp\\htdocs\\GulflamarERPSystem\\frontend\\src\\views\\apps\\chat\\ChatLog.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\xampp\\htdocs\\GulflamarERPSystem\\frontend\\src\\views\\apps\\chat\\ChatLog.vue","mtime":1658909893000},{"path":"C:\\xampp\\htdocs\\GulflamarERPSystem\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1658911406787},{"path":"C:\\xampp\\htdocs\\GulflamarERPSystem\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1658911406756},{"path":"C:\\xampp\\htdocs\\GulflamarERPSystem\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1658911406787},{"path":"C:\\xampp\\htdocs\\GulflamarERPSystem\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":1658911433727}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCB7IGNvbXB1dGVkIH0gZnJvbSAnQHZ1ZS9jb21wb3NpdGlvbi1hcGknOwppbXBvcnQgeyBCQXZhdGFyIH0gZnJvbSAnYm9vdHN0cmFwLXZ1ZSc7CmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7CiAgICBCQXZhdGFyOiBCQXZhdGFyCiAgfSwKICBwcm9wczogewogICAgY2hhdERhdGE6IHsKICAgICAgdHlwZTogT2JqZWN0LAogICAgICByZXF1aXJlZDogdHJ1ZQogICAgfSwKICAgIHByb2ZpbGVVc2VyQXZhdGFyOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgcmVxdWlyZWQ6IHRydWUKICAgIH0KICB9LAogIHNldHVwOiBmdW5jdGlvbiBzZXR1cChwcm9wcykgewogICAgdmFyIGZvcm1hdHRlZENoYXREYXRhID0gY29tcHV0ZWQoZnVuY3Rpb24gKCkgewogICAgICB2YXIgY29udGFjdCA9IHsKICAgICAgICBpZDogcHJvcHMuY2hhdERhdGEuY29udGFjdC5pZCwKICAgICAgICBhdmF0YXI6IHByb3BzLmNoYXREYXRhLmNvbnRhY3QuYXZhdGFyCiAgICAgIH07CiAgICAgIHZhciBjaGF0TG9nID0gW107CgogICAgICBpZiAocHJvcHMuY2hhdERhdGEuY2hhdCkgewogICAgICAgIGNoYXRMb2cgPSBwcm9wcy5jaGF0RGF0YS5jaGF0LmNoYXQ7CiAgICAgIH0KCiAgICAgIHZhciBmb3JtYXR0ZWRDaGF0TG9nID0gW107CiAgICAgIHZhciBjaGF0TWVzc2FnZVNlbmRlcklkID0gY2hhdExvZ1swXSA/IGNoYXRMb2dbMF0uc2VuZGVySWQgOiB1bmRlZmluZWQ7CiAgICAgIHZhciBtc2dHcm91cCA9IHsKICAgICAgICBzZW5kZXI6IGNoYXRNZXNzYWdlU2VuZGVySWQsCiAgICAgICAgbWVzc2FnZXM6IFtdCiAgICAgIH07CiAgICAgIGNoYXRMb2cuZm9yRWFjaChmdW5jdGlvbiAobXNnLCBpbmRleCkgewogICAgICAgIGlmIChjaGF0TWVzc2FnZVNlbmRlcklkID09PSBtc2cuc2VuZGVySWQpIHsKICAgICAgICAgIG1zZ0dyb3VwLm1lc3NhZ2VzLnB1c2goewogICAgICAgICAgICBtc2c6IG1zZy5tZXNzYWdlLAogICAgICAgICAgICB0aW1lOiBtc2cudGltZQogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNoYXRNZXNzYWdlU2VuZGVySWQgPSBtc2cuc2VuZGVySWQ7CiAgICAgICAgICBmb3JtYXR0ZWRDaGF0TG9nLnB1c2gobXNnR3JvdXApOwogICAgICAgICAgbXNnR3JvdXAgPSB7CiAgICAgICAgICAgIHNlbmRlcklkOiBtc2cuc2VuZGVySWQsCiAgICAgICAgICAgIG1lc3NhZ2VzOiBbewogICAgICAgICAgICAgIG1zZzogbXNnLm1lc3NhZ2UsCiAgICAgICAgICAgICAgdGltZTogbXNnLnRpbWUKICAgICAgICAgICAgfV0KICAgICAgICAgIH07CiAgICAgICAgfQoKICAgICAgICBpZiAoaW5kZXggPT09IGNoYXRMb2cubGVuZ3RoIC0gMSkgZm9ybWF0dGVkQ2hhdExvZy5wdXNoKG1zZ0dyb3VwKTsKICAgICAgfSk7CiAgICAgIHJldHVybiB7CiAgICAgICAgZm9ybWF0dGVkQ2hhdExvZzogZm9ybWF0dGVkQ2hhdExvZywKICAgICAgICBjb250YWN0OiBjb250YWN0LAogICAgICAgIHByb2ZpbGVVc2VyQXZhdGFyOiBwcm9wcy5wcm9maWxlVXNlckF2YXRhcgogICAgICB9OwogICAgfSk7CiAgICByZXR1cm4gewogICAgICBmb3JtYXR0ZWRDaGF0RGF0YTogZm9ybWF0dGVkQ2hhdERhdGEKICAgIH07CiAgfQp9Ow=="},{"version":3,"sources":["ChatLog.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8BA,SAAA,QAAA,QAAA,sBAAA;AACA,SAAA,OAAA,QAAA,eAAA;AAEA,eAAA;AACA,EAAA,UAAA,EAAA;AACA,IAAA,OAAA,EAAA;AADA,GADA;AAIA,EAAA,KAAA,EAAA;AACA,IAAA,QAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,QAAA,EAAA;AAFA,KADA;AAKA,IAAA,iBAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,QAAA,EAAA;AAFA;AALA,GAJA;AAcA,EAAA,KAdA,iBAcA,KAdA,EAcA;AACA,QAAA,iBAAA,GAAA,QAAA,CAAA,YAAA;AACA,UAAA,OAAA,GAAA;AACA,QAAA,EAAA,EAAA,KAAA,CAAA,QAAA,CAAA,OAAA,CAAA,EADA;AAEA,QAAA,MAAA,EAAA,KAAA,CAAA,QAAA,CAAA,OAAA,CAAA;AAFA,OAAA;AAKA,UAAA,OAAA,GAAA,EAAA;;AACA,UAAA,KAAA,CAAA,QAAA,CAAA,IAAA,EAAA;AACA,QAAA,OAAA,GAAA,KAAA,CAAA,QAAA,CAAA,IAAA,CAAA,IAAA;AACA;;AAEA,UAAA,gBAAA,GAAA,EAAA;AACA,UAAA,mBAAA,GAAA,OAAA,CAAA,CAAA,CAAA,GAAA,OAAA,CAAA,CAAA,CAAA,CAAA,QAAA,GAAA,SAAA;AACA,UAAA,QAAA,GAAA;AACA,QAAA,MAAA,EAAA,mBADA;AAEA,QAAA,QAAA,EAAA;AAFA,OAAA;AAKA,MAAA,OAAA,CAAA,OAAA,CAAA,UAAA,GAAA,EAAA,KAAA,EAAA;AACA,YAAA,mBAAA,KAAA,GAAA,CAAA,QAAA,EAAA;AACA,UAAA,QAAA,CAAA,QAAA,CAAA,IAAA,CAAA;AACA,YAAA,GAAA,EAAA,GAAA,CAAA,OADA;AAEA,YAAA,IAAA,EAAA,GAAA,CAAA;AAFA,WAAA;AAIA,SALA,MAKA;AACA,UAAA,mBAAA,GAAA,GAAA,CAAA,QAAA;AACA,UAAA,gBAAA,CAAA,IAAA,CAAA,QAAA;AACA,UAAA,QAAA,GAAA;AACA,YAAA,QAAA,EAAA,GAAA,CAAA,QADA;AAEA,YAAA,QAAA,EAAA,CAAA;AACA,cAAA,GAAA,EAAA,GAAA,CAAA,OADA;AAEA,cAAA,IAAA,EAAA,GAAA,CAAA;AAFA,aAAA;AAFA,WAAA;AAOA;;AACA,YAAA,KAAA,KAAA,OAAA,CAAA,MAAA,GAAA,CAAA,EAAA,gBAAA,CAAA,IAAA,CAAA,QAAA;AACA,OAlBA;AAoBA,aAAA;AACA,QAAA,gBAAA,EAAA,gBADA;AAEA,QAAA,OAAA,EAAA,OAFA;AAGA,QAAA,iBAAA,EAAA,KAAA,CAAA;AAHA,OAAA;AAKA,KA3CA,CAAA;AA6CA,WAAA;AACA,MAAA,iBAAA,EAAA;AADA,KAAA;AAGA;AA/DA,CAAA","sourcesContent":["<template>\n  <div class=\"chats\">\n    <div\n      v-for=\"(msgGrp, index) in formattedChatData.formattedChatLog\"\n      :key=\"msgGrp.senderId+String(index)\"\n      class=\"chat\"\n      :class=\"{'chat-left': msgGrp.senderId === formattedChatData.contact.id}\"\n    >\n      <div class=\"chat-avatar\">\n        <b-avatar\n          size=\"36\"\n          class=\"avatar-border-2 box-shadow-1\"\n          variant=\"transparent\"\n          :src=\"msgGrp.senderId === formattedChatData.contact.id ? formattedChatData.contact.avatar : profileUserAvatar\"\n        />\n      </div>\n      <div class=\"chat-body\">\n        <div\n          v-for=\"msgData in msgGrp.messages\"\n          :key=\"msgData.time\"\n          class=\"chat-content\"\n        >\n          <p>{{ msgData.msg }}</p>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { computed } from '@vue/composition-api'\nimport { BAvatar } from 'bootstrap-vue'\n\nexport default {\n  components: {\n    BAvatar,\n  },\n  props: {\n    chatData: {\n      type: Object,\n      required: true,\n    },\n    profileUserAvatar: {\n      type: String,\n      required: true,\n    },\n  },\n  setup(props) {\n    const formattedChatData = computed(() => {\n      const contact = {\n        id: props.chatData.contact.id,\n        avatar: props.chatData.contact.avatar,\n      }\n\n      let chatLog = []\n      if (props.chatData.chat) {\n        chatLog = props.chatData.chat.chat\n      }\n\n      const formattedChatLog = []\n      let chatMessageSenderId = chatLog[0] ? chatLog[0].senderId : undefined\n      let msgGroup = {\n        sender: chatMessageSenderId,\n        messages: [],\n      }\n\n      chatLog.forEach((msg, index) => {\n        if (chatMessageSenderId === msg.senderId) {\n          msgGroup.messages.push({\n            msg: msg.message,\n            time: msg.time,\n          })\n        } else {\n          chatMessageSenderId = msg.senderId\n          formattedChatLog.push(msgGroup)\n          msgGroup = {\n            senderId: msg.senderId,\n            messages: [{\n              msg: msg.message,\n              time: msg.time,\n            }],\n          }\n        }\n        if (index === chatLog.length - 1) formattedChatLog.push(msgGroup)\n      })\n\n      return {\n        formattedChatLog,\n        contact,\n        profileUserAvatar: props.profileUserAvatar,\n      }\n    })\n\n    return {\n      formattedChatData,\n    }\n  },\n}\n</script>\n\n<style>\n\n</style>\n"],"sourceRoot":"src/views/apps/chat"}]}